{
  "_args": [
    [
      {
        "raw": "keystone-email@1.0.5",
        "scope": null,
        "escapedName": "keystone-email",
        "name": "keystone-email",
        "rawSpec": "1.0.5",
        "spec": "1.0.5",
        "type": "version"
      },
      "/home/connextcms/test"
    ]
  ],
  "_from": "keystone-email@1.0.5",
  "_id": "keystone-email@1.0.5",
  "_inCache": true,
  "_location": "/keystone-email",
  "_nodeVersion": "0.12.10",
  "_npmOperationalInternal": {
    "host": "packages-16-east.internal.npmjs.com",
    "tmp": "tmp/keystone-email-1.0.5.tgz_1472184027871_0.4497875284869224"
  },
  "_npmUser": {
    "name": "jedwatson",
    "email": "jed.watson@me.com"
  },
  "_npmVersion": "2.14.9",
  "_phantomChildren": {},
  "_requested": {
    "raw": "keystone-email@1.0.5",
    "scope": null,
    "escapedName": "keystone-email",
    "name": "keystone-email",
    "rawSpec": "1.0.5",
    "spec": "1.0.5",
    "type": "version"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/keystone-email/-/keystone-email-1.0.5.tgz",
  "_shasum": "f0fe3088ca5c2042818f12338c37e06dccc30424",
  "_shrinkwrap": null,
  "_spec": "keystone-email@1.0.5",
  "_where": "/home/connextcms/test",
  "author": {
    "name": "Jed Watson"
  },
  "bugs": {
    "url": "https://github.com/keystonejs/keystone-email/issues"
  },
  "dependencies": {
    "debug": "^2.2.0",
    "html-to-text": "^2.1.3",
    "juice": "^2.0.0",
    "lodash": "^4.15.0",
    "mailgun-js": "^0.7.12",
    "mandrill-api": "^1.0.45",
    "object-assign": "^4.1.0"
  },
  "description": "Email helper for KeystoneJS Apps",
  "devDependencies": {
    "codeclimate-test-reporter": "^0.3.3",
    "eslint": "^2.11.0",
    "eslint-config-keystone": "^2.4.0",
    "eslint-plugin-react": "^5.2.2",
    "istanbul": "^0.4.4",
    "mocha": "^3.0.2",
    "pug": "^2.0.0-beta5"
  },
  "directories": {},
  "dist": {
    "shasum": "f0fe3088ca5c2042818f12338c37e06dccc30424",
    "tarball": "https://registry.npmjs.org/keystone-email/-/keystone-email-1.0.5.tgz"
  },
  "gitHead": "bb205683f29561d4cfdc0a4dbb2b4113c84dce03",
  "homepage": "https://github.com/keystonejs/keystone-email#readme",
  "keywords": [
    "email",
    "keystone",
    "keystonejs",
    "mandrill",
    "mailgun"
  ],
  "license": "MIT",
  "main": "index.js",
  "maintainers": [
    {
      "name": "jedwatson",
      "email": "jed.watson@me.com"
    }
  ],
  "name": "keystone-email",
  "optionalDependencies": {},
  "readme": "# keystone-email\n\nEmail helper for KeystoneJS and Node.js Applications. Makes it easy to send dynamic emails from templates, to one or multiple recipients.\n\nFeatures include:\n\n* Express-like template system (including support for any express-compatible template engine)\n* Support for different email sending services (Mandrill and Mailgun are available now, more may be added)\n* Understands Keystone User models, making it easy to send emails to the results of a query\n* Automatically transforms user variables into the correct format for each email service, for mail-merge style variable use\n* CSS Stylesheets are automatically inlined for robust email client compatibility\n* Text copy is automatically extracted from HTML content\n\n### Background\n\nWe're moving the built-in email functionality out of KeystoneJS core (`keystone.Email`) into its own package, so that it's not bundled by default and can be updated independently.\n\nIf you're interested in helping out, please open an issue!\n\n## Usage\n\nCreate a new Email instance with a template and options:\n\n```\nvar Email = require('keystone-email')\nnew Email(template, emailOptions)\n```\n\nHTML from your template will automatically be converted to text using the [html-to-text](https://www.npmjs.com/package/html-to-text) package.\n\nCSS will be automatically inline with [Juice](https://www.npmjs.com/package/juice) or natively by Mandrill if you are using that service.\n\n#### Options\n\n- `engine` (optional, String or Function) the template engine you are using. Defaults to the extension in the template argument.\n- `transport` (String) the email service you wish to use. Supported options are `mailgun` and `mandrill`. Required for the `send()` method to work, but not for `render()`\n- `root` (optional, String) the root path to look in when resolving template paths. Defaults to the current working directory.\n\n#### Engines\n\nStrings are treated as package names, and loaded with `require()`.\n\nFunctions are the template engine itself.\n\nIf you don't want to parse your template, set your engine to `\"html\"`.\n\n### Sending Email\n\nOnce you have created an Email instance, use the send method to send it:\n\n```js\nnew Email('template.pug', { transport: 'mailgun' }).send(locals, options, (err) => { /* sent */ })\n```\n\n#### Arguments\n\n- `locals` (Object) local variables / options for the template engine\n- `options` (Object) options for the transport, extends the options passed to the Email constructor\n- `callback` (Function) called when the email has been sent, passed an error if one occurred\n\n### Rendering Email\n\nYou can also render the contents of an email without sending it, useful for providing a \"view email in your browser\" feature or previewing email templates during development.\n\n```js\nnew Email('template.pug').render(locals, (err, { html, text }) => { /* rendered */ })\n```\n\n- `locals` (Object) local variables / options for the template engine\n- `callback` (Function) called when the email has been sent, passed an error if one occurred\n\n## Usage with Mailgun\n\nThe following `send()` options are applicable when using `mailgun` as the transport:\n\n- `apiKey` (required, String) Your API Key, defaults to `process.env.MAILGUN_API_KEY`\n- `domain` (required, String) Your sending domain, defaults to `process.env.MAILGUN_DOMAIN`\n- `from` (String or Object) The name and email to send from (see below)\n- `inlineCSS` (Boolean) inline CSS classes in your template, defaults to `true`\n- `to` (String, Object or Array) The recipient(s) of the email (see below)\n- `o:tracking` (Boolean) track open and click statistics for the email, defaults to `true`\n- `recipient-variables` (Object) Mailgun merge variables in Object format (keyed by email address)\n\nSee [mailgun-js](https://www.npmjs.com/package/mailgun-js) and [the Mailgun API Docs](https://documentation.mailgun.com/api-sending.html#sending) for the full set of supported options.\n\n## Usage with Mandrill\n\nThe following `send()` options are applicable when using `mandrill` as the transport:\n\n- `apiKey` (required, String) Your API Key, defaults to `process.env.MANDRILL_API_KEY`\n- `async` (Boolean) send the email asynchronously, defaults to `true`\n- `from` (String or Object) The name and email to send from (see below)\n- `globalMergeVars` (Object) Mandrill global merge vars in Object format (keys can be nested), will be flattened into the array format Mandrill expects\n- `inline_css` (Boolean) inline CSS classes in your template, defaults to `true`\n- `preserve_recipients` (Boolean) put all recipients in the `to` field, defaults to `false`\n- `to` (String, Object or Array) The recipient(s) of the email (see below)\n- `track_clicks` (Boolean) track click statistics for the email, defaults to `true`\n- `track_opens` (Boolean) track open statistics for the email, defaults to `true`\n\nSee [the Mandrill API Docs](https://mandrillapp.com/api/docs/messages.nodejs.html#method-send) for the full set of supported options.\n\n## From option\n\nThe `from` option can be a String (email address), or Object containing `name` and `email`. In the object form, `name` can also be an object containing `first` and `last` (which will be concatenated with a space). This simplifies usage with `User` models in KeystoneJS. For example:\n\n```js\n{ from: 'user@keystonejs.com' };\n{ from: { email: 'user@keystonejs.com', name: 'Jed Watson' } };\n{ from: { email: 'user@keystonejs.com', name: { first: 'Jed', last: 'Watson' } } };\n```\n\n## To option\n\nThe `to` option can be a single recipient or an Array of recipients. Each recipient is represented by a String (email address) or Object containing `name`, `email` and optional `vars`. As with `from`, name can be an object with `first` and `last` properties.\n\nFor Mandrill, `merge_vars` are built for each recipient, including `email`, `name`, `first_name` and `last_name`, as well as any properties in the `vars` object for each recipient. Nested objects are supported and are automatically flattened into the array format Mandrill expects.\n\nFor Mailgun, `recipient-variables` are built for each recipient, including `email`, `name`, `first_name` and `last_name`, as well as any properties in the `vars` object for each recipient. Existing `recipient-variables` are left intact.\n\nFull example of specifying recipients in various formats:\n\n```js\n// single recipient\n{ to: 'user@keystonejs.com' }\n{ to: { email: 'user@keystonejs.com', name: 'Jed Watson' } }\n{ to: {\n\temail: 'user@keystonejs.com',\n\tname: { first: 'Jed', last: 'Watson' },\n\tvars: { role: 'Developer' }\n} }\n// multiple recipients\n{ to: [\n\t{ email: 'user@keystonejs.com', name: 'Jed Watson', vars: { home: 'Sydney' } }\n\t{ email: 'user@keystonejs.com', name: 'Max Stoiber', vars: { home: 'Vienna' } }\n] }\n```\n\n## Breaking changes from `keystone.Email`\n\n### Template helpers\n\nThe built-in template helpers have been removed. If you used these are are interested in helping create their replacement, let us know.\n\n### Default locals\n\nDefault locals have been removed. If you need them, please pass them explicitly. They were:\n\n```js\npretty: true,\n_: require('lodash'),\nmoment: require('moment'),\nutils: require('keystone-utils'),\nsubject: '(no subject)',\ntheme: {}\n```\n\n### Mandrill template support\n\nMandrill template support has been dropped. If you are going to use this, you're not using most of the functionality of this package anyway, and we suggest you simply use Mandrill's API directly.\n\n### Automatic tagging\n\nKeystone would previously automatically tag emails with the sent date and template name. That's pretty opinionated and of questionable usefulness, if you still want this behaviour it's easy to add tags yourself in the `send()` options.\n\n### Path changes\n\nYou could previously use a directory as the template name, and Keystone.Email would look for an `email.{ext}` file (where ext is your template language's default extension). This is no longer supported, please provide the full path to your email template.\n\n### To, From and Contents validation\n\nKeystone would previous return errors if the subject, contents, recipient(s) or the sender address were invalid. This is no longer handled by the library, please make sure you validate these options before sending the emails. If the transport validates these options, errors will be passed directly to the callback.\n\n## License\n\nMIT Licensed. Copyright (c) 2016 Jed Watson.\n\nPortions of this library are based on Express, see https://github.com/expressjs/express for copyright.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/keystonejs/keystone-email.git"
  },
  "scripts": {
    "codeclimate": "codeclimate-test-reporter < coverage/lcov.info",
    "coverage": "istanbul cover _mocha tests",
    "lint": "eslint . --ignore-path .gitignore",
    "test": "npm run lint && npm run test-unit",
    "test-unit": "mocha tests"
  },
  "version": "1.0.5"
}

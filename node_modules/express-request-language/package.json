{
  "_args": [
    [
      {
        "raw": "express-request-language@1.1.9",
        "scope": null,
        "escapedName": "express-request-language",
        "name": "express-request-language",
        "rawSpec": "1.1.9",
        "spec": "1.1.9",
        "type": "version"
      },
      "/home/connextcms/test/node_modules/keystone"
    ]
  ],
  "_from": "express-request-language@1.1.9",
  "_id": "express-request-language@1.1.9",
  "_inCache": true,
  "_location": "/express-request-language",
  "_nodeVersion": "6.3.1",
  "_npmOperationalInternal": {
    "host": "packages-18-east.internal.npmjs.com",
    "tmp": "tmp/express-request-language-1.1.9.tgz_1478174487017_0.8477589546237141"
  },
  "_npmUser": {
    "name": "tinganho",
    "email": "tingan87@gmail.com"
  },
  "_npmVersion": "3.10.7",
  "_phantomChildren": {},
  "_requested": {
    "raw": "express-request-language@1.1.9",
    "scope": null,
    "escapedName": "express-request-language",
    "name": "express-request-language",
    "rawSpec": "1.1.9",
    "spec": "1.1.9",
    "type": "version"
  },
  "_requiredBy": [
    "/keystone"
  ],
  "_resolved": "https://registry.npmjs.org/express-request-language/-/express-request-language-1.1.9.tgz",
  "_shasum": "8d20385724f50e0bf40afd891ac589add6da633b",
  "_shrinkwrap": null,
  "_spec": "express-request-language@1.1.9",
  "_where": "/home/connextcms/test/node_modules/keystone",
  "author": {
    "name": "Tingan Ho"
  },
  "bugs": {
    "url": "https://github.com/tinganho/express-request-language/issues"
  },
  "dependencies": {
    "@types/express": "^4.0.32",
    "accept-language": "^3.0.4",
    "bcp47": "^1.1.2"
  },
  "description": "Figure out a request's language tag by parsing Accept-Language header and stored cookies.",
  "devDependencies": {
    "chai": "^2.0.0",
    "cookie-parser": "^1.3.4",
    "eslint": "1.10.3",
    "express": "^4.11.2",
    "lodash": "3.10.1",
    "mocha": "^2.1.0",
    "sinon": "^1.12.2",
    "sinon-chai": "^2.7.0",
    "watch": "0.17.1"
  },
  "directories": {},
  "dist": {
    "shasum": "8d20385724f50e0bf40afd891ac589add6da633b",
    "tarball": "https://registry.npmjs.org/express-request-language/-/express-request-language-1.1.9.tgz"
  },
  "gitHead": "05b654e7c165e7b6c13f12e6301091c1dee98a25",
  "homepage": "https://github.com/tinganho/express-request-language",
  "keywords": [
    "i18n",
    "http",
    "accept-language"
  ],
  "license": "MIT",
  "main": "index.js",
  "maintainers": [
    {
      "name": "tinganho",
      "email": "tingan87@gmail.com"
    }
  ],
  "name": "express-request-language",
  "optionalDependencies": {},
  "readme": "request-language [![Build Status](https://travis-ci.org/tinganho/express-request-language.png)](https://travis-ci.org/tinganho/express-request-language)\n========================\nA middleware to figure out your request's language either by parsing `Accept-Language` header or by looking at a language cookie's value. `request-language` plays nicely with [L10ns][] by abstracting all your language setting logic for you.\n\n### Installation:\n\n```\nnpm install express-request-language --save\n```\n\n### Usage\nUse it as a middleware to express. All options are described below. Your language will be accessed with `req.language`.\n\n```javascript\nvar requestLanguage = require('express-request-language');\nvar cookieParser = require('cookie-parser');\nvar express = require('express');\nvar app = express();\n\napp.use(cookieParser());\napp.use(requestLanguage({\n  languages: ['en-US', 'zh-CN'],\n  cookie: {\n    name: 'language',\n    options: { maxAge: 24*3600*1000 },\n    url: '/languages/{language}'\n  }\n}));\n\napp.get('/', function(req, res, next) {\n  console.log(req.language); // 'en-US'\n});\n...\n```\n\n### Usage with [L10ns](http://l10ns.org)\nAccess all your localizations in `req.localizations`.\n```javascript\nvar requestLanguage = require('express-request-language');\nvar cookieParser = require('cookie-parser');\nvar express = require('express');\nvar localizations = require('path/to/l10ns/output/all');\nvar app = express();\n\napp.use(cookieParser());\napp.use(requestLanguage({\n  languages: ['en-US', 'zh-CN'],\n  cookie: {\n    name: 'language',\n    options: { maxAge: 24*3600*1000 },\n    url: '/languages/{language}'\n  },\n  localizations: localizations\n}));\n\napp.get('/', function(req, res, next) {\n  // It will use localization from the right language.\n  var l = req.localizations;\n  console.log(l('HELLO_WORLD'));\n});\n...\n```\n\n### Options\n\n#### languages \\{Array\\}\nDefine your language tags ordered in highest priority comes first fashion. The language tags must comply with [BCP47][] standard. The [BCP47][] language tag consist of at least the following subtags:\n\n1. A language subtag (`en`, `zh`).\n3. A script subtag (`Hant`, `Latn`).\n2. A region subtag (`US`, `CN`).\n\nThen language tag has the following syntax:\n\n```\nlanguage[-script][-region]\n```\n\nWhich makes the following language tags `en`, `en-US` and `zh-Hant-TW` all [BCP47][] compliant. Please note that the script tag refers to language script. Some languages use two character sets instead of one. Chinese is a good example of having two character sets instead of oneâ€“it has both traditional characters and simplified characters. And for popular languages that uses two or more scripts please specify the script subtag, because it can make an i18n library fetch more specific locale data.\n\n#### cookie (optional) \\{Object\\}\nSetting the cookie property is optional and whenever it is set this middleware will look at the cookie value instead of the `Accept-Language` header. Setting this cookie property is ideal for application that support more than 1 language and allows users to change language. This option requires that you uses express' cookie middleware [cookie-parser](https://github.com/expressjs/cookie-parser).\n\n##### cookie.name\nName of the language cookie. It will store the current language tag of the user's session and remain until `maxAge` expires or changed by `cookie.url`.\n\n##### cookie.options (optional)\nThe options are the same options as express uses in `res.cookie(name, value. options)`. Please checkout their [documentation](http://expressjs.com/4x/api.html#res.cookie).\n\n##### cookie.url (optional)\nSet the change language URL. Lets say that you set the value to `/languages/{language}` in your configurations. If you visit with your browser the URL path `/languages/en-US`. It will change your language cookie value to `en-US`. It will redirect back to the origin URL if you send a referrer header and default to `/` if it don't send a referrer header.\n\n#### queryName (optional) \\{Object\\}\nYou can optionally set the language using a query string. This option allows you to set the name of the query parameter that triggers the language setting. The default value is `language`.\n\nThe selected language can be unset by setting the language parameter to `default`.\n\n```js\nvar middleware = requestLangauge({\n  languages: ['en-US', 'zh-CN'],\n  queryName: 'locale', // ?locale=zh-CN will set the language to 'zh-CN'\n  cookie: {\n    name: 'language'\n  }\n});\n```\n\n#### localizations (optional) {Function}\nSet the [L10ns][] `requireLocalizations(language)` function. The right language tag will be used and automatically figured out by `request-language`. [L10ns'][L10ns] `l()` function will be accessible through express' `req.localizations`. You also need to set a scoped `l` variable before usage, otherwise [L10ns][] can't update localization keys through code traversal:\n\n```javascript\napp.get('/', function(req, res, next) {\n  var l = req.localizations;\n});\n```\n### Maintainer\n\nTingan Ho [@tingan87][]\n\n### License\nMIT\n\n[L10ns]: http://l10ns.org\n[BCP47]: https://tools.ietf.org/html/bcp47\n[@tingan87]: https://twitter.com/tingan87\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/tinganho/express-request-language.git"
  },
  "scripts": {
    "pretest": "eslint .",
    "test": "bin/test",
    "watch": "watch 'clear && npm run -s test' ."
  },
  "version": "1.1.9"
}
